# Migration `20200922025036-initial-migration`

This migration has been generated by aeuna at 9/22/2020, 11:50:36 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Event" DROP COLUMN "bannerText",
ADD COLUMN "address" text   NOT NULL ,
ADD COLUMN "onDetailTagId" integer []  ,
ADD COLUMN "startDate" timestamp(3)   NOT NULL 

ALTER TABLE "public"."Post" DROP COLUMN "title",
DROP COLUMN "publisher",
ADD COLUMN "weeklyRankNum" integer   ,
ADD COLUMN "monthlyRankNum" integer   ,
ADD COLUMN "lifeTimeRankNum" integer   

ALTER TABLE "public"."Product" DROP COLUMN "isOwnPost",
DROP COLUMN "mainPostId"

ALTER TABLE "public"."Setting" DROP COLUMN "TodaysStylesPeriod",
ADD COLUMN "TodaysStylesPeriod" timestamp(3)   NOT NULL 

ALTER TABLE "public"."Shop" ADD COLUMN "monthlyRankNum" integer   NOT NULL 

ALTER TABLE "public"."ShopExternalLink" ADD COLUMN "order" integer   NOT NULL ,
ADD COLUMN "onBottom" boolean   NOT NULL 
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200918065158-initial-migration..20200922025036-initial-migration
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model User {
   id              Int            @id @default(autoincrement())
@@ -28,12 +28,10 @@
   instaText    String?
   price        Int?
   externalLink ProductExternalLink
   videos       ProductVideo[]
-  isOwnPost    Boolean?
   views        View[]
   priority     Int?
-  mainPostId   Int?
   createdAt    DateTime            @default(now())
   updatedAt    DateTime            @default(now()) @updatedAt
 }
@@ -93,8 +91,9 @@
   tags                 Tag[]
   posts                Post[]
   views                View[]
   monthlyRankScore     Float?
+  monthlyRankNum       Int
   priority             Int?
   onShopListTagId      Int[]
   onDetailTagId        Int[]
   externalLinkClickNum Int
@@ -138,8 +137,10 @@
   url          String
   linkType     LinkType
   shopId       Int?
   Shop         Shop?    @relation(fields: [shopId], references: [id])
+  order        Int
+  onBottom     Boolean
   isOnDetail   Boolean
   isOnGoToShop Boolean
   createdAt    DateTime @default(now())
   updatedAt    DateTime @default(now()) @updatedAt
@@ -181,10 +182,12 @@
   tags           Tag[]
   views          View[]
   isOnList       Boolean
   title          String
-  bannerText     String?
+  address        String
+  onDetailTagId  Int[]
   contentsImages EventContentsImage[]
+  startDate      DateTime
   createdAt      DateTime             @default(now())
   updatedAt      DateTime             @default(now()) @updatedAt
 }
@@ -291,16 +294,17 @@
 model Post {
   id                   Int                @id @default(autoincrement())
   shopId               Int?
   Shop                 Shop?              @relation(fields: [shopId], references: [id])
-  title                String?
   text                 String?
   images               PostImage[]
   preferrers           Like[]
   weeklyRankScore      Float?
   lifeTimeRankScore    Float?
   monthlyRankScore     Float?
-  publisher            String?
+  weeklyRankNum        Int?
+  monthlyRankNum       Int?
+  lifeTimeRankNum      Int?
   products             Product[]
   tags                 Tag[]
   videos               PostVideo[]
   mainProductId        Int?
@@ -383,9 +387,9 @@
   mainBubbleTagId    Int[]
   bestBubbleTagId    Int[]
   shopBubbleTagId    Int[]
   loadingPostNum     Int
-  TodaysStylesPeriod Int
+  TodaysStylesPeriod DateTime
   bestTotalPostNum   Int
   bestConstA         Float
   bestConstB         Float
   shopConstA         Float
```


